<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brazil Fun Facts & Emoji Memory</title>
    <style>
        /* --- General Styles --- */
        :root {
            --primary-color: #8BC34A; /* Light Green */
            --bg-color: #e8f5e9; /* Subtle Pastel Green */
            --text-color: #333;
            --correct-color: #4CAF50; /* Darker Green (used for success) */
            --incorrect-color: #F44336; /* Red (used for failure/timer) */
            --play-again-color: #ffc107; /* Yellow/Orange */
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .game-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }

        h1, h2 {
            color: var(--primary-color);
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s, transform 0.1s;
        }
        
        /* Specific Button Styles */
        #trivia-play-again, #memory-play-again {
            background-color: var(--play-again-color);
            color: var(--text-color);
        }
        #memory-start {
             background-color: var(--primary-color); 
             color: white;
        }


        /* --- Trivia Game Styles (Unchanged) --- */
        #trivia-options button {
            background-color: #e0e0e0;
            color: var(--text-color);
            display: block;
            width: 100%;
            text-align: left;
            margin-bottom: 10px;
        }
        #trivia-options button:hover:not(.correct):not(.incorrect):not(:disabled) {
            background-color: #d0d0d0;
        }

        .trivia-btn-next {
            background-color: var(--correct-color);
            color: white;
            float: right;
            margin-top: 20px;
            display: none;
        }

        /* Feedback Colors */
        .correct {
            background-color: var(--correct-color) !important;
            color: white !important;
        }
        .incorrect {
            background-color: var(--incorrect-color) !important;
            color: white !important;
        }
        
        /* --- Emoji Memory Game Styles --- */
        #memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 500px;
            margin: 20px auto;
        }
        .card {
            background-color: #ccc;
            height: 120px;
            perspective: 1000px;
            cursor: pointer;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Increased size for better emoji visibility */
            font-size: 3em; 
        }
        .card-front {
            background: #2196F3; /* Card back color (Blue) */
            color: white;
            border: 3px solid var(--primary-color);
        }
        .card-back {
            background: white;
            transform: rotateY(180deg);
        }
        .match {
            border: 3px solid var(--correct-color);
            pointer-events: none; /* Matched cards are unclickable */
        }
        #memory-status {
            text-align: center;
            font-size: 1.2em;
            margin-top: 15px;
            font-weight: bold;
            min-height: 30px;
        }
        #timer {
            font-size: 1.5em;
            color: var(--incorrect-color);
            font-weight: bold;
        }
        
        /* Confetti Effect (Simple Text/Emoji) */
        .confetti-display {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes simpleConfettiAnim {
            0% { opacity: 1; transform: translate(-50%, -50%); }
            100% { opacity: 0; transform: translate(-50%, -100px); }
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>Trivia Challenge (5 Questions)</h1>
        <div id="trivia-question-wrapper">
            <h2 id="trivia-question-number">Question 1/5</h2>
            <p id="trivia-question-text" style="font-size: 1.2em; font-weight: bold;">[Question Text Here]</p>
        </div>
        <div id="trivia-options">
            </div>
        <button id="trivia-next" class="trivia-btn-next" onclick="nextTriviaQuestion()">Next Question &raquo;</button>
        <div id="trivia-results" style="text-align: center; margin-top: 30px;">
            </div>
    </div>

    <div class="game-container">
        <h1>üå¥ Brazilian Emoji Memory Game</h1>
        <div style="display: flex; justify-content: space-around; align-items: center; margin-bottom: 10px;">
            <div id="timer-display">Time Left: <span id="timer">60</span> seconds</div>
            <button id="memory-start" onclick="startMemoryGame()">Start Game</button>
        </div>
        
        <div id="memory-game-area">
            <div id="memory-game">
                </div>
            <div id="memory-status">Click 'Start Game' to begin!</div>
        </div>
        <div id="memory-results" style="text-align: center; margin-top: 20px;">
             </div>
    </div>
    
    <div id="confetti" class="confetti-display"></div>

    <script>
        // --- DATA BANKS ---

        const triviaQuestions = [
            // (30 questions remain the same as previous version)
            { q: "What is the capital city of Brazil?", a: "Bras√≠lia", options: ["Rio de Janeiro", "S√£o Paulo", "Bras√≠lia", "Salvador"] },
            { q: "Which famous statue overlooks the city of Rio de Janeiro?", a: "Christ the Redeemer", options: ["Christ the Redeemer", "P√£o de A√ß√∫car (Sugarloaf Mountain)", "The Copacabana Mermaid", "Monument to the Bandeiras"] },
            { q: "What is the largest river in Brazil by volume?", a: "Amazon River", options: ["Paran√° River", "S√£o Francisco River", "Tiet√™ River", "Amazon River"] },
            { q: "Which year did Brazil last win the FIFA World Cup?", a: "2002", options: ["1994", "2002", "2006", "1970"] },
            { q: "What is the national language of Brazil?", a: "Portuguese", options: ["Spanish", "Portuguese", "French", "Brazilian"] },
            { q: "Which Brazilian city is famous for its annual carnival?", a: "Rio de Janeiro", options: ["S√£o Paulo", "Rio de Janeiro", "Porto Alegre", "Curitiba"] },
            { q: "What is the predominant biome in the northern region of Brazil?", a: "Amazon Rainforest", options: ["Cerrado", "Caatinga", "Pampas", "Amazon Rainforest"] },
            { q: "Which state is known as the coffee capital of Brazil?", a: "Minas Gerais", options: ["Bahia", "Rio Grande do Sul", "Minas Gerais", "Paran√°"] },
            { q: "What is the currency of Brazil?", a: "Real", options: ["Peso", "Cruzeiro", "Real", "Dollar"] },
            { q: "Who was the first (and only) Brazilian to win a Formula 1 World Championship three times?", a: "Ayrton Senna", options: ["Nelson Piquet", "Emerson Fittipaldi", "Rubens Barrichello", "Ayrton Senna"] },
            { q: "What is the tallest mountain peak in Brazil?", a: "Pico da Neblina", options: ["Pico Paran√°", "Pico da Neblina", "Pedra da G√°vea", "Monte Roraima"] },
            { q: "What is the official motto of Brazil, found on its flag?", a: "Ordem e Progresso", options: ["Justi√ßa e Paz", "Amor, Uni√£o, e Trabalho", "Ordem e Progresso", "Independ√™ncia ou Morte"] },
            { q: "Which South American country does NOT border Brazil?", a: "Chile", options: ["Argentina", "Peru", "Chile", "Colombia"] },
            { q: "The famous 'Itaipu Dam' is shared with which country?", a: "Paraguay", options: ["Uruguay", "Argentina", "Bolivia", "Paraguay"] },
            { q: "Which city is the largest in Brazil by population?", a: "S√£o Paulo", options: ["Rio de Janeiro", "Bras√≠lia", "S√£o Paulo", "Belo Horizonte"] },
            { q: "What is the Brazilian dessert made of condensed milk, butter, and chocolate powder?", a: "Brigadeiro", options: ["Pudim", "Mousse de Maracuj√°", "Brigadeiro", "Quindim"] },
            { q: "Which mineral is Brazil the world's leading producer of?", a: "Iron Ore", options: ["Gold", "Bauxite", "Iron Ore", "Petroleum"] },
            { q: "What is the name of the vast tropical wetland region shared by Brazil, Paraguay, and Bolivia?", a: "Pantanal", options: ["Sert√£o", "Mata Atl√¢ntica", "Pantanal", "Pampas"] },
            { q: "What is the name of the Brazilian martial art that incorporates music and dance?", a: "Capoeira", options: ["Jiu-Jitsu", "Capoeira", "Luta Livre", "Karate-D√¥"] },
            { q: "Which famous beach is located in Rio de Janeiro?", a: "Copacabana", options: ["Porto de Galinhas", "Praia do Forte", "Jericoacoara", "Copacabana"] },
            { q: "The name 'Brazil' comes from a type of tree known as:", a: "Brazilwood (Pau-Brasil)", options: ["Rubber Tree", "Ipe", "Brazilwood (Pau-Brasil)", "Palm Tree"] },
            { q: "Which region of Brazil is considered the most industrialized?", a: "Southeast Region", options: ["Northeast Region", "South Region", "Southeast Region", "Midwest Region"] },
            { q: "Who is considered the 'King of Football' in Brazil?", a: "Pel√©", options: ["Ronaldo", "Garrincha", "Zico", "Pel√©"] },
            { q: "What is the name of the long, dry season in the Northeast of Brazil?", a: "Sert√£o", options: ["Caatinga", "Sert√£o", "Chapada", "V√°rzea"] },
            { q: "The city of Manaus is located in the middle of which forest?", a: "Amazon Rainforest", options: ["Atlantic Forest", "Pampas", "Cerrado", "Amazon Rainforest"] },
            { q: "What is *Feijoada*?", a: "A black bean and meat stew", options: ["A corn dish", "A black bean and meat stew", "A type of sweet bread", "A fried pastry"] },
            { q: "What is the largest hydroelectric power plant in the world (currently)?", a: "Three Gorges Dam (in China)", options: ["Itaipu Dam", "Belo Monte Dam", "Three Gorges Dam (in China)", "Tucuru√≠ Dam"] },
            { q: "What is the famous geological formation in Rio de Janeiro, next to Christ the Redeemer?", a: "Sugarloaf Mountain (P√£o de A√ß√∫car)", options: ["Corcovado", "Pedra da G√°vea", "Sugarloaf Mountain (P√£o de A√ß√∫car)", "Dois Irm√£os"] },
            { q: "Brazil‚Äôs flag contains how many stars?", a: "27", options: ["26", "27", "21", "25"] },
            { q: "What type of large, flightless bird is native to Brazil?", a: "Rhea", options: ["Ostrich", "Emu", "Rhea", "Cassowary"] }
        ];

        // Emojis for the memory game (8 unique pairs)
        const brazilianEmojis = [
            { name: "Palm Tree", img: "üå¥" },
            { name: "Wave/Beach", img: "üåä" },
            { name: "Parrot", img: "ü¶ú" },
            { name: "Monkey", img: "üêí" },
            { name: "Fruit (A√ßa√≠/Berry)", img: "üçì" }, 
            { name: "Rainforest (Tree)", img: "üå≥" },
            { name: "Rainforest (River)", img: "üõ∂" },
            { name: "Rainforest (Frog)", img: "üê∏" }
        ];

        // --- Utility Function ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // Hardcoded colors for reliability
        const correctColor = '#4CAF50';
        const incorrectColor = '#F44336';

        // --- TRIVIA GAME LOGIC (Unchanged) ---

        let currentTriviaQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let answeredQuestions = new Set(); 

        function startTriviaGame() {
            // 1. Reset state
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('trivia-results').innerHTML = ''; 
            document.getElementById('trivia-next').style.display = 'none';

            // 2. Select 5 unique questions
            let availableQuestions = triviaQuestions.filter((q, index) => !answeredQuestions.has(index));

            if (availableQuestions.length < 5) {
                answeredQuestions.clear();
                availableQuestions = [...triviaQuestions];
            }
            
            shuffleArray(availableQuestions);
            currentTriviaQuestions = availableQuestions.slice(0, 5);
            
            // Mark the selected questions as answered
            currentTriviaQuestions.forEach(q => {
                const index = triviaQuestions.findIndex(originalQ => originalQ.q === q.q);
                if (index !== -1) {
                     answeredQuestions.add(index);
                }
            });

            // 3. Display first question
            displayTriviaQuestion();
        }

        function displayTriviaQuestion() {
            if (currentQuestionIndex >= 5) {
                showTriviaResults();
                return;
            }

            const qData = currentTriviaQuestions[currentQuestionIndex];
            
            document.getElementById('trivia-question-number').textContent = `Question ${currentQuestionIndex + 1}/5`;
            document.getElementById('trivia-question-text').textContent = qData.q;
            document.getElementById('trivia-options').innerHTML = '';
            document.getElementById('trivia-next').style.display = 'none';

            // Shuffle options for the current question
            const shuffledOptions = [...qData.options];
            shuffleArray(shuffledOptions);

            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.onclick = () => checkTriviaAnswer(button, option, qData.a);
                document.getElementById('trivia-options').appendChild(button);
            });
        }

        function checkTriviaAnswer(clickedButton, selectedOption, correctAnswer) {
            document.querySelectorAll('#trivia-options button').forEach(btn => btn.disabled = true);

            if (selectedOption === correctAnswer) {
                clickedButton.classList.add('correct');
                score++;
            } else {
                clickedButton.classList.add('incorrect');
                document.querySelectorAll('#trivia-options button').forEach(btn => {
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
            }

            if (currentQuestionIndex < 4) {
                 document.getElementById('trivia-next').style.display = 'block';
            } else {
                 document.getElementById('trivia-next').style.display = 'none';
                 setTimeout(showTriviaResults, 1000); 
            }
        }

        function nextTriviaQuestion() {
            currentQuestionIndex++;
            displayTriviaQuestion();
        }

        function showTriviaResults() {
            let message = '';
            const messageColor = score >= 3 ? correctColor : incorrectColor;

            if (score === 5) {
                message = "Perfeito! You are a Brazilian master!";
            } else if (score >= 3) {
                message = "Muito Bom! You know your facts!";
            } else {
                message = "Keep learning! Time to study some more Brazil trivia.";
            }

            document.getElementById('trivia-question-number').textContent = `Fim (End)!`;
            document.getElementById('trivia-question-text').textContent = `Quiz Finished.`;
            document.getElementById('trivia-options').innerHTML = '';
            document.getElementById('trivia-next').style.display = 'none';
            
            document.getElementById('trivia-results').innerHTML = `
                <p style="font-size: 1.5em; color: ${messageColor};">
                    You got <strong>${score} out of 5</strong> correct.
                </p>
                <p style="font-size: 1.1em; font-style: italic;">
                    "${message}"
                </p>
                <button id="trivia-play-again" onclick="startTriviaGame()">Play Again</button>
            `;
        }
        
        // --- EMOJI MEMORY GAME LOGIC (UPDATED) ---
        
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let timerId = null;
        let timeLeft = 60;
        let gameStarted = false;

        function startMemoryGame() {
            // Reset state
            cards = [];
            flippedCards = [];
            matchedPairs = 0;
            timeLeft = 60;
            gameStarted = true;
            document.getElementById('memory-results').innerHTML = '';
            document.getElementById('memory-status').textContent = "Find the matching pairs!";
            document.getElementById('memory-start').style.display = 'none';
            document.getElementById('timer').textContent = timeLeft;
            
            // Prepare 16 cards (2 of each of the 8 emojis)
            const gameData = [...brazilianEmojis, ...brazilianEmojis];
            shuffleArray(gameData);
            
            const gameBoard = document.getElementById('memory-game');
            gameBoard.innerHTML = '';
            
            gameData.forEach((emoji, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');
                cardElement.dataset.name = emoji.name; // Use the name for matching
                cardElement.dataset.index = index;
                cardElement.onclick = () => flipCard(cardElement);

                cardElement.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front">?</div>
                        <div class="card-back">${emoji.img}</div>
                    </div>
                `;
                gameBoard.appendChild(cardElement);
                cards.push(cardElement);
            });
            
            // Start the timer
            clearInterval(timerId);
            timerId = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            timeLeft--;
            document.getElementById('timer').textContent = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(timerId);
                endMemoryGame(false); // Time's up, lost
            }
        }

        function flipCard(cardElement) {
            if (!gameStarted || cardElement.classList.contains('flipped') || cardElement.classList.contains('match') || flippedCards.length === 2) {
                return;
            }

            cardElement.classList.add('flipped');
            flippedCards.push(cardElement);

            if (flippedCards.length === 2) {
                // Temporarily disable all card clicks while checking match
                document.querySelectorAll('.card:not(.match)').forEach(c => c.onclick = null);
                setTimeout(checkForMatch, 800);
            }
        }

        function checkForMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.name === card2.dataset.name) {
                // Match found
                card1.classList.add('match');
                card2.classList.add('match');
                matchedPairs++;
                document.getElementById('memory-status').textContent = "You found a match! üéâ";
                simpleConfetti(card1.dataset.name);

                if (matchedPairs === brazilianEmojis.length) {
                    clearInterval(timerId);
                    setTimeout(() => endMemoryGame(true), 500); // Won!
                }
            } else {
                // No match, flip them back
                document.getElementById('memory-status').textContent = "No match. Try again!";
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                }, 1000);
            }

            // Re-enable clicks on unmatched cards after the check (and flip back delay, if any)
            setTimeout(() => {
                document.querySelectorAll('.card:not(.match)').forEach(c => {
                    if (!c.classList.contains('flipped')) { 
                        c.onclick = () => flipCard(c);
                    }
                });
            }, 1000); // Wait for flip back to finish (1000ms delay used above)
            
            flippedCards = [];
        }
        
        function simpleConfetti(message) {
             const confettiDiv = document.getElementById('confetti');
             const burst = document.createElement('div');
             burst.style.cssText = `
                 position: absolute;
                 top: 50%;
                 left: 50%;
                 transform: translate(-50%, -50%);
                 font-size: 3em;
                 animation: simpleConfettiAnim 1.5s forwards;
             `;
             burst.innerHTML = `üåü ${message} üéä`;
             confettiDiv.appendChild(burst);

             setTimeout(() => {
                 burst.remove();
             }, 1500);
        }

        function endMemoryGame(won) {
            gameStarted = false;
            clearInterval(timerId);
            document.getElementById('memory-start').style.display = 'block';
            document.querySelectorAll('.card').forEach(c => c.onclick = null); // Ensure all cards are unclickable

            const messageColor = won ? correctColor : incorrectColor;

            if (won) {
                document.getElementById('memory-status').innerHTML = `
                    <p style="font-size: 1.8em; color: ${messageColor};">
                        üèÜ Parab√©ns! You found all the emojis with ${timeLeft} seconds left!
                    </p>
                `;
                // Celebrate with lots of confetti and emojis!
                document.getElementById('confetti').innerHTML = `
                     <div style="position: absolute; top: 20%; left: 50%; transform: translateX(-50%); font-size: 5em;">
                         üéâüå¥üåäüêíü•≥
                     </div>
                `;
                 setTimeout(() => document.getElementById('confetti').innerHTML = '', 3000); 
            } else {
                document.getElementById('memory-status').innerHTML = `
                    <p style="font-size: 1.5em; color: ${messageColor};">
                        Time's up! You got ${matchedPairs} out of ${brazilianEmojis.length} pairs.
                    </p>
                `;
            }
            
             document.getElementById('memory-results').innerHTML = `
                <button id="memory-play-again" onclick="startMemoryGame()">Play Again</button>
             `;
        }

        // --- Initialization ---
        function initializeGames() {
            startTriviaGame();
            
            // Display initial memory game board (cards face down)
            const gameBoard = document.getElementById('memory-game');
            gameBoard.innerHTML = `
                 <p style="grid-column: 1 / span 4; text-align: center; color: #666;">
                    Press 'Start Game' to shuffle the emojis and begin the 60 second timer!
                 </p>
            `;
            document.getElementById('timer').textContent = 60;
        }

        window.onload = initializeGames;

    </script>
</body>
</html>